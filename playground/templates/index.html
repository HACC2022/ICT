{%extends "base.html"%}

{%block content %}

<div class="container box-spcae url-box">
    <h1>Hawaii URL Shortener</h1>
    <form id="url-form">
        {% csrf_token %}
        <div class="form-group box-spcae">
        <label id="urlLabel"for="url">Enter URL</label>
        <input type="url" class="form-control" id="longLink" name = "longLink" aria-describedby="inputUrl" placeholder="Enter URL">
        </div>
        <div class="form-group box-spcae">
            <label for="urlOutput">Shortened URL</label>
            <h4></h4>
            <input type="text" readonly class="form-control-plaintext" id="urlOutput" rows="3" >
        </div>
        <div class="form-group box-spcae">
            <button type="submit" class="btn btn-primary" style="height:35px ;">Submit</button>
        </div>
    </form>
</div>

<script type="text/javascript">
    $(document).on('submit', '#url-form', function (e) {
        e.preventDefault();

        $.ajax({
            type: 'POST',
            url: '/shorten',
            data: {
                link: $('#longLink').val(),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
            },
            success: function (data) {
                $('h4').html("localhost:8000/" + data)
            }
        });
    });
</script>

{%endblock%}